---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const members = await getCollection('members');
  return members.map((member) => ({
    params: { slug: member.slug },
    props: { member },
  }));
}

const { member } = Astro.props;
const { Content } = await member.render();
---

<Layout title={member.data.name}>
  <article class="member-profile">
    <div class="profile-header">
      <img src={member.data.image} alt={member.data.name} class="profile-image" />
      <div class="profile-info">
        <h1>
          {member.data.name}
          {member.data.title && <span class="title">, {member.data.title}</span>}
        </h1>
        <p class="role">{member.data.role}</p>
        {member.data.region && <p class="region">{member.data.region}</p>}
      </div>
    </div>

    <div class="profile-content">
      <Content />
    </div>

    <a href="/members" class="back-link">‚Üê Back to all members</a>
  </article>
</Layout>

<style>
  .member-profile {
    max-width: 800px;
    margin: 0 auto;
  }

  .profile-header {
    display: flex;
    gap: 2rem;
    margin-bottom: 2rem;
    align-items: start;
  }

  .profile-image {
    width: 250px;
    height: 250px;
    object-fit: cover;
    border-radius: 12px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  }

  .profile-info h1 {
    margin-bottom: 0.5rem;
  }

  .title {
    font-weight: normal;
    color: var(--text-light);
  }

  .role {
    color: var(--primary);
    font-size: 1.25rem;
    font-weight: 600;
    margin-bottom: 0.25rem;
  }

  .region {
    color: var(--text-light);
  }

  .profile-content {
    line-height: 1.8;
    margin-bottom: 2rem;
  }

  .back-link {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    text-decoration: none;
    color: var(--primary);
    font-weight: 500;
  }

  .back-link:hover {
    text-decoration: underline;
  }

  @media (max-width: 768px) {
    .profile-header {
      flex-direction: column;
    }

    .profile-image {
      width: 100%;
      height: auto;
    }
  }
</style>